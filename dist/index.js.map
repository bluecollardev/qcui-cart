{"version":3,"file":"index.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/ExampleComponent.js","../src/flux/actions/index.js","../node_modules/fbjs/lib/invariant.js","../node_modules/flux/lib/Dispatcher.js","../node_modules/flux/index.js","../src/utils/Array.js","../src/utils/String.js","../src/utils/Object.js","../src/flux/store/index.js","../node_modules/object-assign/index.js","../src/utils/QCForm.js","../src/flux/context/index.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nimport styles from './styles.css'\n\nexport default class ExampleComponent extends Component {\n  static propTypes = {\n    text: PropTypes.string\n  }\n\n  static defaultProps = {\n    text: 'My Component'\n  }\n\n  render() {\n    const {\n      text\n    } = this.props\n\n    return (\n      <div className={styles.test}>\n        Example Component: {text}\n      </div>\n    )\n  }\n}\n","const ActionTypes = {\n  CART_INITIALIZE: 'cart-initialize',\n  CART_ADD_ITEM: 'cart-add-item',\n  CART_REMOVE_ITEM: 'cart-remove-item',\n  CART_UPDATE_ITEM: 'cart-update-item',\n  CART_ADD_OPTION: 'cart-add-option',\n  CART_RESET: 'cart-reset',\n  CART_CLEAR: 'cart-clear',\n  CART_REVERT: 'cart-revert'\n}\n\nconst CartActions = (dispatcher) => {\n  return {\n    /**\n     * Initialize a cart, optionally providing default items and selected items.\n     * @param items\n     * @param selection\n     */\n    init(items, selection) {\n      dispatcher.dispatch({\n        actionType: ActionTypes.CART_INITIALIZE,\n        config: {\n          items: items || {},\n          selection: selection || []\n        }\n      })\n    },\n    /**\n     * Adds an item to the cart.\n     * @param key\n     * @param quantity\n     * @param item\n     */\n    addItem(key, quantity, item) {\n      dispatcher.dispatch({\n        actionType: ActionTypes.CART_ADD_ITEM,\n        key: key,\n        quantity: quantity,\n        item: item\n      })\n    },\n    /**\n     * Removes an item from the cart.\n     * @param index\n     */\n    removeItem(index) {\n      dispatcher.dispatch({\n        actionType: ActionTypes.CART_REMOVE_ITEM,\n        index: index\n      })\n    },\n    /**\n     * Updates the quantity of an item in the cart.\n     * @param index\n     * @param quantity\n     */\n    updateQuantity(index, quantity) {\n      dispatcher.dispatch({\n        actionType: ActionTypes.CART_UPDATE_ITEM,\n        index: index,\n        quantity: quantity\n      })\n    },\n    /**\n     * Adds a product option to a item in the cart.\n     * @param key\n     * @param quantity\n     * @param option\n     * @param item\n     */\n    addOption(key, quantity, option, item) {\n      dispatcher.dispatch({\n        actionType: ActionTypes.CART_ADD_OPTION,\n        key: key,\n        quantity: quantity,\n        option: option,\n        item: item\n      })\n    },\n    /**\n     * Clears all item from the cart. Does not create a new order ID.\n     */\n    clearCart() {\n      dispatcher.dispatch({\n        actionType: ActionTypes.CART_CLEAR\n      })\n    },\n    /**\n     * Reverts the item to a previous state. Does not create a new order ID.\n     */\n    revertCart() {\n      dispatcher.dispatch({\n        actionType: ActionTypes.CART_REVERT\n      })\n    },\n    /**\n     * Clears all item from the cart and creates a new order with a fresh order ID.\n     */\n    resetCart() {\n      dispatcher.dispatch({\n        actionType: ActionTypes.CART_RESET\n      })\n    }\n  }\n}\n\nexport { CartActions, ActionTypes }\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n'use strict';\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar validateFormat = function validateFormat(format) {};\n\nif (process.env.NODE_ENV !== 'production') {\n  validateFormat = function validateFormat(format) {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  };\n}\n\nfunction invariant(condition, format, a, b, c, d, e, f) {\n  validateFormat(format);\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n}\n\nmodule.exports = invariant;","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule Dispatcher\n * \n * @preventMunge\n */\n\n'use strict';\n\nexports.__esModule = true;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar invariant = require('fbjs/lib/invariant');\n\nvar _prefix = 'ID_';\n\n/**\n * Dispatcher is used to broadcast payloads to registered callbacks. This is\n * different from generic pub-sub systems in two ways:\n *\n *   1) Callbacks are not subscribed to particular events. Every payload is\n *      dispatched to every registered callback.\n *   2) Callbacks can be deferred in whole or part until other callbacks have\n *      been executed.\n *\n * For example, consider this hypothetical flight destination form, which\n * selects a default city when a country is selected:\n *\n *   var flightDispatcher = new Dispatcher();\n *\n *   // Keeps track of which country is selected\n *   var CountryStore = {country: null};\n *\n *   // Keeps track of which city is selected\n *   var CityStore = {city: null};\n *\n *   // Keeps track of the base flight price of the selected city\n *   var FlightPriceStore = {price: null}\n *\n * When a user changes the selected city, we dispatch the payload:\n *\n *   flightDispatcher.dispatch({\n *     actionType: 'city-update',\n *     selectedCity: 'paris'\n *   });\n *\n * This payload is digested by `CityStore`:\n *\n *   flightDispatcher.register(function(payload) {\n *     if (payload.actionType === 'city-update') {\n *       CityStore.city = payload.selectedCity;\n *     }\n *   });\n *\n * When the user selects a country, we dispatch the payload:\n *\n *   flightDispatcher.dispatch({\n *     actionType: 'country-update',\n *     selectedCountry: 'australia'\n *   });\n *\n * This payload is digested by both stores:\n *\n *   CountryStore.dispatchToken = flightDispatcher.register(function(payload) {\n *     if (payload.actionType === 'country-update') {\n *       CountryStore.country = payload.selectedCountry;\n *     }\n *   });\n *\n * When the callback to update `CountryStore` is registered, we save a reference\n * to the returned token. Using this token with `waitFor()`, we can guarantee\n * that `CountryStore` is updated before the callback that updates `CityStore`\n * needs to query its data.\n *\n *   CityStore.dispatchToken = flightDispatcher.register(function(payload) {\n *     if (payload.actionType === 'country-update') {\n *       // `CountryStore.country` may not be updated.\n *       flightDispatcher.waitFor([CountryStore.dispatchToken]);\n *       // `CountryStore.country` is now guaranteed to be updated.\n *\n *       // Select the default city for the new country\n *       CityStore.city = getDefaultCityForCountry(CountryStore.country);\n *     }\n *   });\n *\n * The usage of `waitFor()` can be chained, for example:\n *\n *   FlightPriceStore.dispatchToken =\n *     flightDispatcher.register(function(payload) {\n *       switch (payload.actionType) {\n *         case 'country-update':\n *         case 'city-update':\n *           flightDispatcher.waitFor([CityStore.dispatchToken]);\n *           FlightPriceStore.price =\n *             getFlightPriceStore(CountryStore.country, CityStore.city);\n *           break;\n *     }\n *   });\n *\n * The `country-update` payload will be guaranteed to invoke the stores'\n * registered callbacks in order: `CountryStore`, `CityStore`, then\n * `FlightPriceStore`.\n */\n\nvar Dispatcher = (function () {\n  function Dispatcher() {\n    _classCallCheck(this, Dispatcher);\n\n    this._callbacks = {};\n    this._isDispatching = false;\n    this._isHandled = {};\n    this._isPending = {};\n    this._lastID = 1;\n  }\n\n  /**\n   * Registers a callback to be invoked with every dispatched payload. Returns\n   * a token that can be used with `waitFor()`.\n   */\n\n  Dispatcher.prototype.register = function register(callback) {\n    var id = _prefix + this._lastID++;\n    this._callbacks[id] = callback;\n    return id;\n  };\n\n  /**\n   * Removes a callback based on its token.\n   */\n\n  Dispatcher.prototype.unregister = function unregister(id) {\n    !this._callbacks[id] ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.unregister(...): `%s` does not map to a registered callback.', id) : invariant(false) : undefined;\n    delete this._callbacks[id];\n  };\n\n  /**\n   * Waits for the callbacks specified to be invoked before continuing execution\n   * of the current callback. This method should only be used by a callback in\n   * response to a dispatched payload.\n   */\n\n  Dispatcher.prototype.waitFor = function waitFor(ids) {\n    !this._isDispatching ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.waitFor(...): Must be invoked while dispatching.') : invariant(false) : undefined;\n    for (var ii = 0; ii < ids.length; ii++) {\n      var id = ids[ii];\n      if (this._isPending[id]) {\n        !this._isHandled[id] ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.waitFor(...): Circular dependency detected while ' + 'waiting for `%s`.', id) : invariant(false) : undefined;\n        continue;\n      }\n      !this._callbacks[id] ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.waitFor(...): `%s` does not map to a registered callback.', id) : invariant(false) : undefined;\n      this._invokeCallback(id);\n    }\n  };\n\n  /**\n   * Dispatches a payload to all registered callbacks.\n   */\n\n  Dispatcher.prototype.dispatch = function dispatch(payload) {\n    !!this._isDispatching ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch.') : invariant(false) : undefined;\n    this._startDispatching(payload);\n    try {\n      for (var id in this._callbacks) {\n        if (this._isPending[id]) {\n          continue;\n        }\n        this._invokeCallback(id);\n      }\n    } finally {\n      this._stopDispatching();\n    }\n  };\n\n  /**\n   * Is this Dispatcher currently dispatching.\n   */\n\n  Dispatcher.prototype.isDispatching = function isDispatching() {\n    return this._isDispatching;\n  };\n\n  /**\n   * Call the callback stored with the given id. Also do some internal\n   * bookkeeping.\n   *\n   * @internal\n   */\n\n  Dispatcher.prototype._invokeCallback = function _invokeCallback(id) {\n    this._isPending[id] = true;\n    this._callbacks[id](this._pendingPayload);\n    this._isHandled[id] = true;\n  };\n\n  /**\n   * Set up bookkeeping needed when dispatching.\n   *\n   * @internal\n   */\n\n  Dispatcher.prototype._startDispatching = function _startDispatching(payload) {\n    for (var id in this._callbacks) {\n      this._isPending[id] = false;\n      this._isHandled[id] = false;\n    }\n    this._pendingPayload = payload;\n    this._isDispatching = true;\n  };\n\n  /**\n   * Clear bookkeeping used for dispatching.\n   *\n   * @internal\n   */\n\n  Dispatcher.prototype._stopDispatching = function _stopDispatching() {\n    delete this._pendingPayload;\n    this._isDispatching = false;\n  };\n\n  return Dispatcher;\n})();\n\nmodule.exports = Dispatcher;","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\nmodule.exports.Dispatcher = require('./lib/Dispatcher');\n","function recursiveMap(fn, list) {\n  return !list.length ? [] : [fn(list[0])].concat(recursiveMap(fn, list.slice(1)))\n}\n\nfunction recursiveReduce(fn, value, list) {\n  return !list.length ? value : recursiveReduce(fn, fn(value, list[0], list.slice(1)))\n}\n\nfunction recursiveFilter(predicate, list) {\n  return !list.length ? [] : (predicate(list[0]) ? [list[0]] : []).concat(Array.prototype.filter(predicate, list.slice(1)))\n}\n\nfunction intersect(a, b) {\n  let ai = 0; let bi = 0; let result = []\n\n  while (ai < a.length && bi < b.length) {\n    if (a[ai] < b[bi]) {\n      ai++\n    } else if (a[ai] > b[bi]) {\n      bi++\n    } else {\n      result.push(a[ai])\n      ai++\n      bi++\n    }\n  }\n\n  return result\n}\n\nfunction intersectDestructive(a, b) {\n  let result = []\n\n  while (a.length > 0 && b.length > 0) {\n    if (a[0] < b[0]) {\n      a.shift()\n    } else if (a[0] > b[0]) {\n      b.shift()\n    } else {\n      result.push(a.shift())\n      b.shift()\n    }\n  }\n\n  return result\n}\n\nfunction containsAll(arr1, arr2) {\n  return arr2.every(arr2Item => arr1.includes(arr2Item))\n}\n\nfunction sameMembers(arr1, arr2) {\n  return (containsAll(arr1, arr2) && containsAll(arr2, arr1))\n}\n\nfunction jsonSameMembers(arr1, arr2) {\n  return JSON.stringify(arr1) === JSON.stringify(arr2)\n}\n\nexport {\n  recursiveMap,\n  recursiveReduce,\n  recursiveFilter,\n  intersect,\n  intersectDestructive,\n  containsAll,\n  sameMembers,\n  jsonSameMembers\n}\n","function capitalizeFirstLetter(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1)\n}\n\n// TODO: Un-jQuery this\nfunction escapeHtml(unsafe) {\n  return undefined // $('<div />').text(unsafe).html()\n}\n\nfunction unescapeHtml(safe) {\n  return undefined // $('<div />').html(safe).text()\n}\n\nfunction hyphenize(str) {\n  return str.replace(/[A-Z]/g, (str) => {\n    return '-' + str.toLowerCase()\n  })\n}\n\nfunction underscore(str) {\n  return str.replace(/[A-Z]/g, (str) => {\n    return '_' + str.toLowerCase()\n  })\n}\n\nfunction camelize(str) {\n  return str.replace(/[\\s\\-_]+(\\w)/g, (str) => {\n    return str.toUpperCase().replace(/[\\s\\-_]+/, '')\n  })\n}\n\nfunction swapSubstrings(str, sub1, sub2) {\n  str = str.replace(new RegExp('(' + sub1 + '|' + sub2 + ')', 'g'), (match) => {\n    return match === sub1 ? sub2 : sub1\n  })\n\n  return str\n}\n\nfunction escapeRegExp(str) {\n  return str.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, '\\\\$1')\n}\n\nfunction shortenText(str, maxLength) {\n  maxLength = maxLength || str.length\n  let trimmed = str.substr(0, maxLength)\n  return trimmed.substr(0, Math.min(trimmed.length, trimmed.lastIndexOf(' ')))\n}\n\nfunction toSentenceCase(text) {\n  return text.replace(/\\w\\S*/g, function (txt) {\n    return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase()\n  })\n}\n\nfunction quoteIfNecessary(text) {\n  if (text.indexOf(' ') !== -1) {\n    text = '\\'' + text + '\\''\n  }\n  return text\n}\n\nfunction unquoteIfNecessary(text) {\n  if ((text[0] === '\\'' && text[text.length - 1] === '\\'') || (text[0] === '\"' && text[text.length - 1] === '\"')) {\n    text = text.slice(1, text.length - 1)\n  }\n  return text\n}\n\nfunction decodeHtmlEntities(str) {\n  let element = document.createElement('div')\n\n  let decode = (str) => {\n    if (str && typeof str === 'string') {\n      // Strip script/html tags\n      str = str.replace(/<script[^>]*>([\\S\\s]*?)<\\/script>/gmi, '')\n      str = str.replace(/<\\/?\\w(?:[^\"'>]|\"[^\"]*\"|'[^']*')*>/gmi, '')\n      element.innerHTML = str\n      str = element.textContent\n      element.textContent = ''\n    }\n\n    return str\n  }\n\n  return decode(str)\n}\n\nfunction stringIsInteger(str) {\n  if (typeof str === 'undefined' || str === null) {\n    return false\n  }\n\n  let n = Math.floor(Number(str))\n  return String(n) === str && n >= 0\n}\n\nexport {\n  capitalizeFirstLetter,\n  escapeHtml,\n  unescapeHtml,\n  hyphenize,\n  underscore,\n  camelize,\n  swapSubstrings,\n  escapeRegExp,\n  shortenText,\n  toSentenceCase,\n  quoteIfNecessary,\n  unquoteIfNecessary,\n  decodeHtmlEntities,\n  stringIsInteger\n}\n","import * as StringHelper from './String'\n\nfunction isEmpty(obj) {\n  obj = obj || null\n\n  if (obj === null) return true\n\n  for (let prop in obj) {\n    if (obj.hasOwnProperty(prop) && obj.prop !== null) return false\n  }\n\n  return true\n}\n\nfunction cleanObject(obj) {\n  obj = Object.entries(obj)\n    .filter(([key, value]) => value !== undefined)\n    .reduce((obj, [key, value]) => (obj[key] = value, obj), {})\n\n  return obj\n}\n\nfunction recursiveFormatKeys(data, from, to) {\n  let clone = {}\n  let modes = [\n    'underscore',\n    'camelcase',\n    'hyphenate'\n  ]\n  if (!(modes.indexOf(from) > -1 || !modes.indexOf(to) > -1)) {\n    throw new Error('Cannot normalize data: incorrect mode and currentMode supplied. Valid modes are \\'underscore\\', \\'camelcase\\' and \\'hyphenate\\'.')\n  }\n\n  Object.keys(data).reduce((obj, prop) => {\n    let val = data[prop]\n    let newVal = (typeof val === 'object' && val !== null) ? recursiveFormatKeys(val, from, to) : val\n\n    switch (to) {\n      case 'underscore':\n        obj[StringHelper.underscore(prop)] = newVal\n        break\n      case 'camelcase':\n        obj[StringHelper.camelize(prop)] = newVal\n        break\n      case 'hyphenate':\n        obj[StringHelper.hyphenize(prop)] = newVal\n        break\n    }\n    return obj\n  }, clone)\n\n  return clone\n}\n\n/**\n * TODO: A handler like below preserves properties\n * if (old_key !== new_key) {\n *     Object.defineProperty(o, new_key, Object.getOwnPropertyDescriptor(o, old_key))\n *     delete o[old_key];\n * }\n */\nfunction recursiveRenameKeys(data, mappings) {\n  let clone = {}\n  /* let modes = ['underscore', 'camelcase', 'hyphenate']\n   if (!(modes.indexOf(from) > -1 || !modes.indexOf(to) > -1)) {\n   throw new Error(\"Cannot normalize data: incorrect mode and currentMode supplied. Valid modes are 'underscore', 'camelcase' and 'hyphenate'.\")\n   } */\n\n  Object.keys(data).reduce((obj, prop) => {\n    let val = data[prop]\n    let newVal = (typeof val === 'object' && val !== null) ? recursiveFormatKeys(val, mappings) : val\n\n    /* switch (to) {\n     case 'underscore':\n     obj[StringHelper.underscore(prop)] = newVal\n     break\n     case 'camelcase':\n     obj[StringHelper.camelize(prop)] = newVal\n     break\n     case 'hyphenate':\n     obj[StringHelper.hyphenize(prop)] = newVal\n     break\n     }\n     return obj\n     }, clone) */\n\n    return clone\n  })\n}\n\nfunction prefixKeys(obj, prefix, dest = {}) {\n  return Object.keys(obj).reduce((o, key) => {\n    o[`${prefix}${key}`] = obj[key]\n    return o\n  }, dest || {})\n}\n\n/**\n * Quick and dirty way to compare arrays or objects without getting into too much detail.\n * This isn't the fastest solution by any means but it generally works.\n * I don't recommend using this to compare complex structures (it'll be slow).\n */\nfunction jsonSameMembers(obj1, obj2) {\n  return JSON.stringify(obj1) === JSON.stringify(obj2)\n}\n\nexport {\n  isEmpty,\n  cleanObject,\n  recursiveFormatKeys,\n  recursiveRenameKeys,\n  prefixKeys,\n  jsonSameMembers\n}\n","import { EventEmitter } from 'events'\nimport { Dispatcher } from 'flux'\n\nimport * as ArrayHelper from '../../utils/Array'\nimport * as ObjectHelper from '../../utils/Object'\n\nlet INSTANCE_COUNTER = 0\nlet CHANGE_EVENT_NAME = 'change'\nlet ITEM_ADDED_EVENT_NAME = 'item-added'\nlet ITEM_CHANGED_EVENT_NAME = 'item-changed'\nlet ITEM_OPTIONS_CHANGED_EVENT_NAME = 'product-options-changed'\nlet RESET_EVENT_NAME = 'cart-reset'\nlet CLEARED_EVENT_NAME = 'cart-cleared'\n\nlet itemKey = 'product' // TODO: Make this configurable using mappings?\nlet idKey = 'vin' // TODO: Make this configurable using mappings?\nlet optionIdKey = 'id' // TODO: Make this configurable using mappings?\nlet optionsKey = 'options' // TODO: Make this configurable using mappings?\nlet nextKey = 'nextKey' // TODO: Make this configurable using mappings?\nlet dataKey = 'data' // TODO: Make this configurable using mappings?\nlet quantityKey = 'quantity' // TODO: Make this configurable using mappings?\n\nclass CartStore extends EventEmitter {\n  constructor(dispatcher) {\n    super()\n\n    this.INSTANCE_ID = INSTANCE_COUNTER++\n\n    // console.log('INITIALIZING CARTSTORE ' + this.INSTANCE_ID)\n\n    /* dispatcher = dispatcher || null\n     if (dispatcher instanceof Dispatcher) {\n     this.dispatcher = dispatcher\n     } else {\n     this.dispatcher = new Dispatcher()  // TODO: Hmmm... maybe I shouldn't just create a random dispatcher that's attached to the base store\n     // This is just in here until I decide how to handle the case where it isn't provided\n     } */\n\n    this.subscribe(dispatcher, () => this.registerToActions.bind(this))\n\n    this.items = {}\n    this.selection = []\n    this[nextKey] = 0\n    this.dispatchToken = null\n  }\n\n  subscribe(dispatcher, actionSubscribe) {\n    if (!(dispatcher instanceof Dispatcher)) {\n      throw new Error('Failed to provide dispatcher to BaseStore, cannot register actions')\n    }\n\n    this.dispatchToken = dispatcher.register(actionSubscribe())\n  }\n\n  init(config) {\n    this.items = config.items\n    this.selection = []\n    // this.total = total\n\n    config.selection.forEach(item => {\n      item[quantityKey] = Number(item[quantityKey])\n      item._key = this[nextKey]++\n      if (item[dataKey]) {\n        this.items[item[idKey]] = item[dataKey]\n      } else {\n        item[dataKey] = this.items[item[idKey]]\n      }\n      if (!item[dataKey]) {\n        throw 'Missing data for item \\'' + item[idKey] + '\\'.'\n      }\n      this.selection.push(item)\n      this.items[item[idKey]]._initialQty = item[quantityKey]\n    })\n\n    this.reIndex()\n  }\n\n  registerToActions(action) {\n    switch (action.actionType) {\n      case 'cart-initialize':\n        this.init(action.config)\n        this.emit('ready')\n        // Ready isn't triggering update!\n        // We were previously using change;\n        // I plan on updating this behavior\n        // but not just yet...\n        this.emit(CHANGE_EVENT_NAME)\n        break\n      case 'cart-revert':\n        this.init(action.config)\n        this.emit(CHANGE_EVENT_NAME)\n        break\n      case 'cart-add-item':\n        this.addItem(action.key, action.quantity, action.item)\n        break\n      case 'cart-remove-item':\n        this.removeItem(action.index)\n        break\n      case 'cart-update-item':\n        this.updateQuantity(action.index, action.quantity)\n        break\n      case 'cart-add-option':\n        this.addOption(action.key, action.quantity, action.option, action.item)\n        break\n      case ITEM_OPTIONS_CHANGED_EVENT_NAME:\n        this.reset()\n        break\n      case 'cart-clear':\n        this.clear()\n        break\n      default:\n        break\n    }\n  }\n\n  reIndex() {\n    let idx = 0\n    this.selection.forEach(item => {\n      item._index = idx++\n    })\n  }\n\n  getSelection() {\n    return this.selection\n  }\n\n  getCount() {\n    // TODO: This isn't working right yet\n    let total = 0\n\n    if (this.selection instanceof Array && this.selection.length > 0) {\n      total = this.selection.reduce((total, selection) => {\n        return total + parseInt(selection[quantityKey])\n      }, total)\n    }\n\n    return total\n  }\n\n  isEmpty() {\n    return !this.selection.length\n  }\n\n  getItem(index) {\n    return this.selection[index]\n  }\n\n  addItem(key, quantity, item, silent) {\n    // console.log('ATTEMPTING TO ADD ITEM TO CARTSTORE ' + this.INSTANCE_ID)\n\n    // Cart store addItem\n    silent = silent || false\n    let data = null\n    let options = []\n\n    if (this.items.hasOwnProperty(key)) {\n      data = this.items[key]\n    } else {\n      data = item\n\n      this.items[key] = data\n    }\n\n    let exists = false\n    for (let selectionKey in this.selection) {\n      exists = false // Reset the variable just in case\n      // Compare item keys to see if the item already exists in the selection array\n      if (key === this.selection[selectionKey][idKey]) {\n        // Now make sure the selected options are a match...\n        // If it isn't an exact match, we're going to assume a different\n        // configuration for the same product, so skip this and create a new item\n\n        // Consider empty options property to be an empty array\n        options = (item[optionsKey] instanceof Array) ? item[optionsKey] : options\n\n        if (ArrayHelper.jsonSameMembers(options, this.selection[selectionKey][optionsKey])) {\n          exists = true\n        }\n      }\n\n      if (exists) {\n        const oldQuantity = this.selection[selectionKey][quantityKey]\n        this.selection[selectionKey][quantityKey] += Number(quantity)\n\n        if (!silent) {\n          this.emit(CHANGE_EVENT_NAME)\n          this.emit(ITEM_CHANGED_EVENT_NAME, item, this.selection[selectionKey][quantityKey], oldQuantity)\n        }\n\n        return // Break out\n      }\n    }\n\n    if (data) {\n      let selectionItem = {\n        [idKey]: key,\n        [quantityKey]: Number(quantity),\n        [dataKey]: data,\n        [optionsKey]: [...options],\n        _index: this.selection.length,\n        _key: this[nextKey]++\n      }\n\n      this.selection.push(selectionItem)\n\n      if (!silent) {\n        this.emit(CHANGE_EVENT_NAME)\n        this.emit(ITEM_ADDED_EVENT_NAME, key, Number(quantity), item)\n      }\n    }\n  }\n\n  updateItem(key, quantity, item, silent) {\n    silent = silent || false\n    let data = (item.hasOwnProperty([dataKey])) ? item[dataKey]: null\n\n    if (this.items.hasOwnProperty(key)) {\n      data = this.items[key]\n    } else {\n      this.items[key] = data\n    }\n\n    for (let selectionKey in this.selection) {\n      if (key === this.selection[selectionKey][idKey]) {\n        const oldQty = this.selection[selectionKey][quantityKey]\n        this.selection[selectionKey][quantityKey] += Number(quantity)\n\n        if (!silent) {\n          this.emit(CHANGE_EVENT_NAME)\n          this.emit(ITEM_CHANGED_EVENT_NAME, item, this.selection[selectionKey][quantityKey], oldQty)\n        }\n\n        return\n      }\n    }\n\n    if (data) {\n      let selectionItem = {\n        [idKey]: key,\n        [quantityKey]: Number(quantity),\n        [dataKey]: data,\n        [optionsKey]: [],\n        _index: this.selection.length,\n        _key: this[nextKey]++\n      }\n\n      this.selection.push(selectionItem)\n\n      if (!silent) {\n        this.emit(CHANGE_EVENT_NAME)\n        this.emit(ITEM_ADDED_EVENT_NAME, key, Number(quantity), item)\n      }\n    }\n  }\n\n  /**\n   * @param index\n   */\n  removeItem(index) {\n    let key = this.selection[index][idKey]\n    let item = this.selection.splice(index, 1)[0]\n\n    this.reIndex()\n\n    this.emit(CHANGE_EVENT_NAME)\n    this.emit('item-removed', key, item)\n  }\n\n  /**\n   The product options\n   \"options\": [{\n     \"name\": \"Packages per Shipment\",\n     \"type\": \"select\",\n     \"option_value\": [{\n       \"image\": \"\",\n       \"price\": false,\n       \"price_formated\": false, // TODO: Typo!\n       \"price_prefix\": \"+\",\n       \"product_option_value_id\": \"527\",\n       \"option_value_id\": \"241\",\n       \"name\": \"1\",\n       \"quantity\": 0\n     }]\n   }]\n\n   Selected option value sample\n   \"option\": { // The selected option value\n     \"image\": \"\",\n     \"price\": false,\n     \"price_formated\": false, // TODO: Typo!\n     \"price_prefix\": \"+\",\n     \"product_option_value_id\": \"525\",\n     \"option_value_id\": \"238\",\n     \"name\": \"250g\",\n     \"quantity\": 0,\n     \"option\": { // The option itself\n     \"name\": \"Product Size\",\n     \"type\": \"select\",\n     \"required\": \"1\",\n     \"product_option_id\": \"253\",\n     \"option_id\": \"44\"\n   }\n\n   The selection object\n   \"selection\": [{\n     data: {}, // Cart item product data\n     id: \"3382\",\n     options: [], // I think this is redundant / useless\n     quantity: 2,\n     _index: 0,\n     _key: 0\n   }]\n\n   * @param key\n   * @param quantity item quantity\n   * @param option The data item option to be stored\n   * @param item Optionally include the parent item in the product-options-changed event arguments\n   */\n  addOption(key, quantity, option, item) {\n    // Loop over active items in cart (the current selection)\n    // If the item being added isn't already in the cart, we\n    // need to add it before processing the option\n    let createItem = true\n    for (let idx = 0; idx < this.selection.length; idx++) {\n      let selection = this.selection[idx]\n      if (item[idKey] === selection[idKey]) {\n        createItem = false\n      }\n    }\n\n    // Store item option if it doesn't exist\n    if (createItem) {\n      this.addItem(item[idKey], 1, item, true) // Silent add, don't trigger events\n    }\n\n    // Loop over active selections in cart\n    for (let idx = 0; idx < this.selection.length; idx++) {\n      if (!(this.selection[idx][optionsKey] instanceof Array)) {\n        this.selection[idx][optionsKey] = []\n      }\n\n      if (typeof this.selection[idx][nextKey] === 'undefined'\n        || isNaN(this.selection[idx][nextKey])) {\n        this.selection[idx][nextKey] = 0\n      }\n\n      let selection = this.selection[idx]\n\n      // If we've found the correct item in the cart\n      if (item[idKey] === selection[idKey]) {\n        // Grab the item's options\n        let selectedOptions = selection[optionsKey]\n\n        // Loop over the item's options\n        for (let optionIdx = 0; optionIdx < selectedOptions.length; optionIdx++) {\n          // If the option already has been added, increment its quantity and exit\n          if (key === selectedOptions[optionIdx][optionIdKey]) {\n            const oldQuantity = selection[quantityKey]\n            this.selection[idx][optionsKey][optionIdx][quantityKey] += Number(quantity)\n\n            // console.log('option ' + selection[idKey] + ' has already been added')\n\n            if (createItem) {\n              this.emit(CHANGE_EVENT_NAME)\n              this.emit(ITEM_ADDED_EVENT_NAME, selection[idKey], selection[quantityKey], selection[dataKey])\n            } else {\n              this.emit(CHANGE_EVENT_NAME)\n              this.emit(ITEM_OPTIONS_CHANGED_EVENT_NAME, option, Number(quantity), item, oldQuantity)\n            }\n\n            return\n          }\n        }\n\n        // If we didn't find the option (if we had found it, this function would have returned), add it...\n        if (option) {\n          let selectionItemOption = {\n            [optionIdKey]: option[optionIdKey],\n            [quantityKey]: Number(quantity),\n            [dataKey]: option\n          }\n\n          this.selection[idx][optionsKey].push(selectionItemOption)\n\n          if (createItem) {\n            this.emit(CHANGE_EVENT_NAME)\n            this.emit(ITEM_ADDED_EVENT_NAME, selection[idKey], selection[quantityKey], selection[dataKey])\n          } else {\n            this.emit(CHANGE_EVENT_NAME)\n            this.emit(ITEM_OPTIONS_CHANGED_EVENT_NAME, option, Number(quantity), item)\n          }\n        }\n      }\n    }\n  }\n\n  updateQuantity(index, quantity) {\n    let item = this.selection[index]\n    const oldQty = item[quantityKey]\n    item[quantityKey] = Number(quantity)\n    this.emit(CHANGE_EVENT_NAME)\n    this.emit(ITEM_CHANGED_EVENT_NAME, this.items[item[idKey]], quantity, oldQty)\n  }\n\n  getOptionPrice(itemData, selectedOption, optionValueId) {\n    //let itemOptions = itemData['options']\n\n    if (selectedOption['option_value'] instanceof Array) {\n      let selectedOptionValues = selectedOption['option_value']\n      let selectedValues = selectedOptionValues.filter(option => {\n        return Number(option['product_option_value_id']) === optionValueId\n      })\n\n      if (selectedValues instanceof Array && selectedValues.length > 0) {\n        let selectedValue = selectedValues[0] // Single selection for now\n\n        if (selectedValue['price'] !== false && !isNaN(selectedValue['price'])) {\n          return Number(selectedValue['price'])\n        }\n      }\n    }\n  }\n\n  reset() {\n    this.selection = []\n    this.emit(CHANGE_EVENT_NAME)\n    this.emit(RESET_EVENT_NAME)\n  }\n\n  clear() {\n    this.selection = []\n    this.emit(CHANGE_EVENT_NAME)\n    this.emit(CLEARED_EVENT_NAME)\n  }\n\n  emitChange() {\n    this.emit(CHANGE_EVENT_NAME)\n  }\n\n  addChangeListener(cb) {\n    this.on(CHANGE_EVENT_NAME, cb)\n  }\n\n  removeChangeListener(cb) {\n    this.removeListener(CHANGE_EVENT_NAME, cb)\n  }\n\n  normalizePayload(data, from, to) {\n    return ObjectHelper.recursiveFormatKeys(data, from, to)\n  }\n\n  /**\n   * TODO: I am a utility method move me out of here!\n   */\n  _isset(array, value) {\n    return (typeof array[value] !== 'undefined' && array[value] !== null) ? true : false\n  }\n}\n\nexport default CartStore\nexport { CartStore }\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/**\n * Retrieves a nested value from within an object given a string path.\n * @param path eg. path.to[0].my[1].object\n * @param data An object to traverse\n * @returns {*}\n */\nfunction getMappedValue(mapping, data, resolve) {\n  resolve = (typeof resolve === 'boolean') ? resolve : false\n\n  let pathMapping = null\n  // If the mapping provided is a simple string ie: MY_FIELD: 'myField'\n  if (typeof mapping === 'string' && mapping.length > 0) {\n    resolve = true // Simple mappings must be resolved\n    pathMapping = mapping\n  }\n\n  mapping = mapping || null\n  if (mapping !== null) {\n    if (mapping.hasOwnProperty('property') && mapping.hasOwnProperty('value')) {\n      pathMapping = (resolve === false) ? mapping.property : mapping.value\n    }\n  }\n\n  if (pathMapping !== null) {\n    return getPathMappedValue(pathMapping, data)\n  }\n}\n\nfunction getPathMappedValue(path, data) {\n  if (typeof data === 'undefined' || data === null) {\n    return null\n  }\n  // Access static methods using constructor property\n  let chunks = getObjectPath(path)\n\n  let arrayExpr = /(\\[\\]|\\[(.*)\\])$/g\n  let isArray = false\n\n  let currentChunk = chunks.shift() // Shift the first element off the array\n  isArray = arrayExpr.test(currentChunk)\n\n  /*if (isArray) {\n   console.log(currentChunk + ' is an array')\n   } else {\n   console.log(currentChunk + ' is not an array')\n   }*/\n\n  if (chunks.length > 0) {\n    // console.log('processing path chunk: ' + currentChunk)\n    let prop = currentChunk\n\n    if (isArray) {\n      // Bust the [] off the string so we're left with just the property key\n      prop = prop.replace(arrayExpr, '')\n\n      // Get the index of the array item we're targeting\n      // Not sure if there's ever a case where we wouldn't use an index (myProp[])? How would that work?\n      let arrIdx = parseInt(arrayExpr.exec(currentChunk)[2]) // Just get the number\n      // console.log(JSON.stringify(data[prop][arrIdx]))\n\n      // IMPORTANT! Re-escape the chunks before recursing or the result will not be what you expected\n      chunks = chunks.map(chunk => {\n        return chunk.replace('.', '\\\\\\\\.')\n      })\n\n      if (data[prop] instanceof Array && data[prop].length > 0) {\n        return getPathMappedValue(chunks.join('.'), data[prop][arrIdx])\n      }\n    }\n\n    // console.log(JSON.stringify(data[prop]))\n    return getPathMappedValue(chunks.join('.'), data[prop])\n  } else {\n    return data[currentChunk]\n  }\n}\n\n/**\n * Sets a nested value within an object using a given string path.\n * @param path\n * @param data\n * @returns {*}\n */\nfunction setMappedValue(path, data, value) {\n  if (typeof data === 'undefined' || data === null) {\n    return null\n  }\n  // Access static methods using constructor property\n  let chunks = getObjectPath(path)\n\n  let arrayExpr = /(\\[\\]|\\[(.*)\\])$/g\n  let isArray = false\n\n  let currentChunk = chunks.shift() // Shift the first element off the array\n  isArray = arrayExpr.test(currentChunk)\n\n  /*if (isArray) {\n   console.log(currentChunk + ' is an array')\n   } else {\n   console.log(currentChunk + ' is not an array')\n   }*/\n\n  if (chunks.length > 0) {\n    // console.log('processing path chunk: ' + currentChunk)\n    let prop = currentChunk\n\n    if (isArray) {\n      // Bust the [] off the string so we're left with just the property key\n      prop = prop.replace(arrayExpr, '')\n\n      // Get the index of the array item we're targeting\n      // Not sure if there's ever a case where we wouldn't use an index (myProp[])? How would that work?\n      let arrIdx = parseInt(arrayExpr.exec(currentChunk)[2]) // Just get the number\n      // console.log(JSON.stringify(data[prop][arrIdx]))\n\n      // IMPORTANT! Re-escape the chunks before recursing or the result will not be what you expected\n      chunks = chunks.map(chunk => {\n        return chunk.replace('.', '\\\\\\\\.')\n      })\n\n      setMappedValue(chunks.join('.'), data[prop][arrIdx], value)\n    } else {\n      // console.log(JSON.stringify(data[prop]))\n      setMappedValue(chunks.join('.'), data[prop], value)\n    }\n\n  } else {\n    data[currentChunk] = value\n  }\n}\n\nfunction getObjectPath(str) {\n  // ([^\\\\]) Negative capturing group to make sure we don't pick up escape slashes\n  // (\\\\\\\\)* Match backslash character\n  // \\. Grab any unescaped dots\n\n  if (!(typeof str === 'string')) {\n    throw new Error('Invalid object path, getObjectPath expected a string')\n  }\n\n  let merged = []\n\n  // Credits to https://github.com/wankdanker/node-object-mapper/blob/master/src/set-key-value.js for this approach to parsing object paths\n  let dotExpr = /([^\\\\])(\\\\\\\\)*\\./g // Matches all unescaped dots in the provided string\n  let chunks = str.split(dotExpr) // Explode the string into an array of path chunks\n\n  for (let i = 0; i < chunks.length; i++) {\n    if ((i - 1) % 3 === 0) {\n      // Every third match is the character of the first group [^\\\\] which needs to be merged in again\n      // That comment doesn't really make sense... let's work on it eh?\n      let tmpKey = chunks[i - 1] + chunks[i]\n      merged.push(tmpKey.replace('\\\\.', '.'))\n    }\n\n    // Add part after last dot\n    if (i === chunks.length - 1) {\n      merged.push(chunks[i].replace('\\\\.', '.'))\n    }\n  }\n\n  chunks = merged\n\n  // console.log(JSON.stringify(chunks))\n\n  return chunks\n}\n\nexport {\n  getMappedValue,\n  getPathMappedValue,\n  setMappedValue,\n  getObjectPath\n}\n","import assign from 'object-assign'\nimport React, { Component } from 'react'\nimport * as PropTypes from 'prop-types'\nimport { Dispatcher } from 'flux'\n\nimport * as FormHelper from '../../utils/QCForm'\n\nimport { CartActions } from '../actions'\nimport { CartStore } from '../store'\n\n/**\n * This is an Observable manager for context. Context is broken in React 16.2.\n * We will upgrade the components to use the new React Context in the near future.\n * @param componentClass\n * @param exposedMethods\n * @returns {{getSubscribers: (function(): Array), notifySubscribers: notifySubscribers, subscribe: (function(*=): Function), getCartContextValue: (function(): *)}}\n */\nconst createCartContextManager = (componentClass, exposedMethods) => {\n  let dispatcher = new Dispatcher()\n  let actions = CartActions(dispatcher)\n  let store = new CartStore(dispatcher)\n\n  let cartContextValue = assign({\n    component: componentClass,\n    dispatcher: dispatcher,\n    actions: actions,\n    store: store\n  }, exposedMethods)\n\n  let subscribers = []\n\n  const getCartContextValue = () => {\n    return cartContextValue\n  }\n\n  const subscribe = (subscriber) => {\n    subscribers.push(subscriber)\n\n    return () => {\n      subscribers = subscribers.filter((s) => {\n        return s !== subscriber\n      })\n    }\n  }\n\n  const getSubscribers = () => {\n    return subscribers\n  }\n\n  const notifySubscribers = (state) => {\n    // console.log('NOTIFY SUBSCRIBERS')\n    cartContextValue = state\n    subscribers.forEach((callback) => {\n      return callback(cartContextValue)\n    })\n  }\n\n  return {\n    getCartContextValue: getCartContextValue,\n    getSubscribers: getSubscribers,\n    notifySubscribers: notifySubscribers,\n    subscribe: subscribe\n  }\n}\n\nlet INSTANCE_COUNTER = 0\n\n/**\n * This higher-order component wraps an existing component, and decorates it with\n * methods needed to interact with the core shopping cart.\n */\nconst CartContext = (ComposedComponent) => {\n  let displayName = ComposedComponent.displayName || ComposedComponent.name || 'Component'\n\n  class CartContext extends Component {\n    static contextTypes = {\n      cartContextManager: PropTypes.object,\n      cart: PropTypes.object\n    }\n\n    static childContextTypes = {\n      cartContextManager: PropTypes.object,\n      cart: PropTypes.object\n    }\n\n    static propTypes = {\n      addToCartMode: PropTypes.string,\n      mappings: PropTypes.object, // TODO: Provide shape\n      showChargeModal: PropTypes.func\n    }\n\n    static defaultProps = {\n      addToCartMode: 'instant',\n      mappings: {} ,// TODO: Flesh this out\n      showChargeModal: () => {}\n    }\n\n    constructor(props, context) {\n      super(props)\n\n      this.INSTANCE_ID = INSTANCE_COUNTER++\n\n      // console.log('INITIALIZING CARTCONTEXT ' + this.INSTANCE_ID)\n\n      this.getDecoratedComponentInstance = this.getDecoratedComponentInstance.bind(this)\n      this.getContextManager = this.getContextManager.bind(this)\n      this.getContextValue = this.getContextValue.bind(this)\n      this.getChildContext = this.getChildContext.bind(this)\n      this.getSelection = this.getSelection.bind(this)\n      this.isEmpty = this.isEmpty.bind(this)\n      this.hasItems = this.hasItems.bind(this)\n      // this.categoryClicked = this.categoryClicked.bind(this)\n      this.itemClicked = this.itemClicked.bind(this)\n      this.optionClicked = this.optionClicked.bind(this)\n      this.optionClicked = this.optionClicked.bind(this)\n      this.itemDropped = this.itemDropped.bind(this)\n      this.addToCart = this.addToCart.bind(this)\n      this.quickAddToCart = this.quickAddToCart.bind(this)\n      this.addOptionToCart = this.addOptionToCart.bind(this)\n      this.addToCartClicked = this.addToCartClicked.bind(this)\n      this.addOptionToCartClicked = this.addOptionToCartClicked.bind(this)\n      this.refresh = this.refresh.bind(this)\n      this.reset = this.reset.bind(this)\n      this.getTotal = this.getTotal.bind(this)\n      this.doCheckout = this.doCheckout.bind(this)\n\n      this.state = {\n        blockUi: false,\n        chooseQuantity: false,\n        settings: {}\n      }\n\n      let classMethods = {\n        getContextManager: this.getContextManager,\n        getContextValue: this.getContextValue,\n        getSelection: this.getSelection,\n        addToCart: this.addToCart,\n        quickAddToCart: this.quickAddToCart,\n        addOptionToCart: this.addOptionToCart,\n        addToCartClicked: this.addToCartClicked,\n        addOptionToCartClicked: this.addOptionToCartClicked,\n        getTotal: this.getTotal,\n        doCheckout: this.doCheckout\n      }\n\n      this.cartContextManager = createCartContextManager(this, classMethods)\n\n      const cartContextValue = this.cartContextManager.getCartContextValue()\n      const store = cartContextValue.store\n\n      store.addListener('change', () => {\n        // console.log('CartContext CHANGE event emitted in instance ' + this.INSTANCE_ID)\n        let payload = this.cartContextManager.getCartContextValue()\n        this.cartContextManager.notifySubscribers(payload)\n      })\n    }\n\n    getContextManager() {\n      return this.cartContextManager\n    }\n\n    getContextValue() {\n      return this.cartContextManager.getCartContextValue()\n    }\n\n    getChildContext() {\n      // console.log('CartContext.getChildContext')\n      // console.log('cartContextManager')\n      // console.log(this.cartContextManager)\n      // console.log('cartContextValue')\n      // console.log(this.cartContextManager.getCartContextValue())\n      // console.log('CartContext subscribers')\n      // console.log(this.cartContextManager.getSubscribers())\n      return {\n        cartContextManager: this.cartContextManager,\n        cart: this.cartContextManager.getCartContextValue()\n      }\n    }\n\n    componentDidMount() {\n      // this.context.actions.init(this.props.items, this.context.store.getSelection())\n      this.cartContextManager.subscribe((data) => {\n        // console.log('update CART with data')\n        // console.log(data)\n        this.forceUpdate()\n      })\n    }\n\n    componentWillReceiveProps() {\n      let payload = this.cartContextManager.getCartContextValue()\n      // console.log('component received new props dump context val')\n      // console.log(payload)\n      this.cartContextManager.notifySubscribers(payload)\n    }\n\n    getDecoratedComponentInstance() {\n      /* invariant(\n       this.child,\n       'In order to access an instance of the wrapped component it can not be a stateless component.',\n       ) */\n      return this.wrappedInstance\n    }\n\n    getStore() {\n      const cartContextValue = this.cartContextManager.getCartContextValue()\n      return cartContextValue.store\n    }\n\n    getSelection() {\n      return this.getStore().getSelection()\n    }\n\n    isEmpty() {\n      return this.getStore().isEmpty()\n    }\n\n    hasItems() {\n      let selection = this.getStore().getSelection() || null\n      return (selection instanceof Array && selection.length > 0)\n    }\n\n    /**\n     * onItemClicked must be implemented in the extending class?\n     */\n    itemClicked(e, item) {\n      e.preventDefault()\n      e.stopPropagation()\n\n      // If the Quick Add button was clicked\n      if (e.target.type === 'button') {\n        this.addToCartClicked(e, item)\n      }\n    }\n\n    itemDropped(item) {}\n\n    optionClicked(item) {\n      // console.log('option clicked')\n      // console.log(item)\n\n      this.forceUpdate() // Redraw, options have changed\n    }\n\n    addToCart(e, item, quantity) {\n      e.preventDefault()\n      e.stopPropagation()\n\n      let itemMappings = this.props.mappings.inventoryItem\n\n      let itemId = null\n      quantity = !isNaN(quantity) ? Number(quantity) : null\n\n      if (quantity === null) {\n        quantity = 0\n\n        switch (this.props.addToCartMode) {\n          case 'instant':\n            // Temporarily store the selected product's information\n            quantity = 1\n\n            break\n          case 'popup':\n            if (!this.state.chooseQuantity) {\n              quantity = parseFloat(this.keypad.getForm().value)\n            }\n\n            break\n          case 'normal':\n            if (this.state.chooseQuantity) {\n              // If the keypad popup modal is open, use its value\n              quantity = parseFloat(this.popupKeypad.getForm().value)\n            } else {\n              quantity = parseFloat(this.keypad.getForm().value)\n            }\n\n            break\n          default:\n            if (this.state.chooseQuantity) {\n              // If the keypad popup modal is open, use its value\n              quantity = parseFloat(this.popupKeypad.getForm().value)\n            } else {\n              quantity = parseFloat(this.keypad.getForm().value)\n            }\n\n            break\n        }\n      }\n\n      if (!isNaN(quantity) && quantity > -1) {\n        item = item || null\n\n        if (item === null) throw new Error('Attempted to add non-item to cart!')\n\n        // itemId = FormHelper.getMappedValue(itemMappings.VIN, item)\n        // itemId = FormHelper.getMappedValue(itemMappings.ITEM_ID, item)\n\n        this.cartContextManager.getCartContextValue().actions.addItem(itemId, quantity, item)\n      } else {\n        console.log('Please enter the desired quantity.')\n      }\n\n      this.forceUpdate()\n    }\n\n    addOptionToCart(e, option, quantity, item) {\n      // CartContext.addToCart\n      e.preventDefault()\n      e.stopPropagation()\n\n      let itemMappings = this.props.mappings.inventoryItem\n      let itemId = null\n      let optionId = null\n\n      quantity = !isNaN(quantity) ? Number(quantity) : null\n\n      if (quantity === null) {\n        quantity = 0\n\n        switch (this.props.addToCartMode) {\n          case 'instant':\n            // Temporarily store the selected product's information\n            quantity = 1\n\n            break\n          case 'popup':\n            if (!this.state.chooseQuantity) {\n              quantity = parseFloat(this.keypad.getForm().value)\n            }\n\n            break\n          case 'normal':\n            if (this.state.chooseQuantity) {\n              // If the keypad popup modal is open, use its value\n              quantity = parseFloat(this.popupKeypad.getForm().value)\n            } else {\n              quantity = parseFloat(this.keypad.getForm().value)\n            }\n\n            break\n          default:\n            if (this.state.chooseQuantity) {\n              // If the keypad popup modal is open, use its value\n              quantity = parseFloat(this.popupKeypad.getForm().value)\n            } else {\n              quantity = parseFloat(this.keypad.getForm().value)\n            }\n\n            break\n        }\n      }\n\n      if (!isNaN(quantity) && quantity > -1) {\n        item = item || null\n        option = option || null\n\n        if (option === null) throw new Error('Attempted to add non-option to cart!')\n\n        optionId = FormHelper.getMappedValue(itemMappings.ITEM_ID, option)\n\n        this.cartContextManager.getCartContextValue().actions.addOption(optionId, quantity, option, item)\n      } else {\n        alert('Please enter the desired quantity.')\n      }\n\n      this.forceUpdate()\n    }\n\n    quickAddToCart(e) {\n      // CartContext.quickAddToCart\n      this.addToCart(e) // Add to cart\n\n      // Close quantity keypad popup modal\n      this.setState({ chooseQuantity: false })\n    }\n\n    addToCartClicked(e, item, quantity) {\n      let itemMappings = this.props.mappings.inventoryItem\n      let itemId = null\n\n      e.preventDefault()\n      e.stopPropagation()\n\n      switch (this.props.addToCartMode) {\n        case 'instant':\n          // Temporarily store the selected product's information\n          // TODO: How do I avoid using mappings?\n          // itemId = FormHelper.getMappedValue(itemMappings.VIN, item)\n          // itemId = FormHelper.getMappedValue(itemMappings.ITEM_ID, item)\n          // TODO: Fix me!\n          itemId = 1\n          quantity = (!isNaN(quantity)) ? quantity : 1\n\n          this.addToCart(e, item, quantity) // Add the item to the cart\n\n          break\n        case 'popup':\n          // Temporarily store the selected product's information (yes, that's right, zero quantity)\n          // itemId = FormHelper.getMappedValue(itemMappings.VIN, item)\n          // itemId = FormHelper.getMappedValue(itemMappings.ITEM_ID, item)\n\n          // And open the Keypad / Quantity selection modal\n          this.setState({ chooseQuantity: true })\n\n          break\n        case 'normal':\n          // Go to the product detail page / component (unless we're there already?)\n          break\n        default:\n          break\n      }\n    }\n\n    addOptionToCartClicked(e, option, quantity, item) {\n      let itemMappings = this.props.mappings.inventoryItem\n\n      let itemId = null\n      let optionId = null\n\n      e.preventDefault()\n      e.stopPropagation()\n\n      switch (this.props.addToCartMode) {\n        case 'instant':\n          // Temporarily store the selected product's information\n          optionId = FormHelper.getMappedValue(itemMappings.ITEM_ID, option)\n          quantity = (!isNaN(quantity)) ? quantity : 1\n\n          this.addOptionToCart(e, option, quantity, item) // Add the item to the cart\n\n          break\n        case 'popup':\n          // Temporarily store the selected product's information (yes, that's right, zero quantity)\n          itemId = FormHelper.getMappedValue(itemMappings.ITEM_ID, item)\n\n          // And open the Keypad / Quantity selection modal\n          this.setState({ chooseQuantity: true })\n\n          break\n        case 'normal':\n          // Go to the product detail page / component (unless we're there already?)\n          break\n        default:\n          break\n      }\n    }\n\n    refresh() {\n      this.setState({ canSubmit: !this.childContext.store.isEmpty() })\n    }\n\n    reset() {\n      this.childContext.actions.cart.emptyCart()\n    }\n\n    getTotal() {\n      let total = 0\n      return total\n    }\n\n    doCheckout() {\n      this.props.showChargeModal(() => {\n        window.location.href = '#/checkout'\n      })\n    }\n\n    render() {\n      let props = assign({}, this.props, {\n        getContextManager: this.getContextManager,\n        getContextValue: this.getContextValue,\n        getSelection: this.getSelection,\n        addToCart: this.addToCart,\n        quickAddToCart: this.quickAddToCart,\n        addOptionToCart: this.addOptionToCart,\n        addToCartClicked: this.addToCartClicked,\n        addOptionToCartClicked: this.addOptionToCartClicked,\n        getTotal: this.getTotal,\n        doCheckout: this.doCheckout\n      })\n\n      return (\n        <ComposedComponent\n          ref={(instance) => { this.wrappedInstance = instance }}\n          {...props}\n        />\n      )\n    }\n  }\n\n  return CartContext\n}\n\nexport { CartContext, createCartContextManager }\n"],"names":["ExampleComponent","text","props","React","styles","test","Component","propTypes","PropTypes","string","defaultProps","ActionTypes","CartActions","dispatcher","items","selection","dispatch","CART_INITIALIZE","key","quantity","item","CART_ADD_ITEM","index","CART_REMOVE_ITEM","CART_UPDATE_ITEM","option","CART_ADD_OPTION","CART_CLEAR","CART_REVERT","CART_RESET","invariant","require$$0","jsonSameMembers","arr1","arr2","JSON","stringify","hyphenize","str","replace","toLowerCase","underscore","camelize","toUpperCase","recursiveFormatKeys","data","from","to","clone","modes","indexOf","Error","keys","reduce","obj","prop","val","newVal","StringHelper","INSTANCE_COUNTER","CHANGE_EVENT_NAME","ITEM_ADDED_EVENT_NAME","ITEM_CHANGED_EVENT_NAME","ITEM_OPTIONS_CHANGED_EVENT_NAME","RESET_EVENT_NAME","CLEARED_EVENT_NAME","idKey","optionIdKey","optionsKey","nextKey","dataKey","quantityKey","CartStore","INSTANCE_ID","subscribe","registerToActions","bind","dispatchToken","actionSubscribe","Dispatcher","register","config","forEach","Number","_key","push","_initialQty","reIndex","action","actionType","init","emit","addItem","removeItem","updateQuantity","addOption","reset","clear","idx","_index","total","Array","length","parseInt","silent","options","hasOwnProperty","exists","selectionKey","ArrayHelper","oldQuantity","selectionItem","oldQty","splice","createItem","isNaN","selectedOptions","optionIdx","selectionItemOption","itemData","selectedOption","optionValueId","selectedOptionValues","selectedValues","filter","selectedValue","cb","on","removeListener","ObjectHelper","array","value","EventEmitter","getMappedValue","mapping","resolve","pathMapping","property","getPathMappedValue","path","chunks","getObjectPath","arrayExpr","isArray","currentChunk","shift","arrIdx","exec","map","chunk","join","merged","dotExpr","split","i","tmpKey","createCartContextManager","componentClass","exposedMethods","actions","store","cartContextValue","assign","subscribers","getCartContextValue","subscriber","s","getSubscribers","notifySubscribers","state","callback","CartContext","ComposedComponent","displayName","name","context","getDecoratedComponentInstance","getContextManager","getContextValue","getChildContext","getSelection","isEmpty","hasItems","itemClicked","optionClicked","itemDropped","addToCart","quickAddToCart","addOptionToCart","addToCartClicked","addOptionToCartClicked","refresh","getTotal","doCheckout","classMethods","cartContextManager","addListener","payload","forceUpdate","wrappedInstance","getStore","e","preventDefault","stopPropagation","target","type","itemMappings","mappings","inventoryItem","itemId","addToCartMode","chooseQuantity","parseFloat","keypad","getForm","popupKeypad","log","optionId","FormHelper","ITEM_ID","setState","canSubmit","childContext","cart","emptyCart","showChargeModal","location","href","instance","contextTypes","childContextTypes"],"mappings":"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"}